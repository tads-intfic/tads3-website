<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="website">
    <link rel="icon" href="/assets/images/tads-favicon.png" type="image/png">
    <link rel="stylesheet" type="text/css"
                           href="/assets/css/styles.css">
    <title>docs-adv3-doc-libref-object-dynamicfunc-html</title>
    <meta property="og:title" content=
    "docs-adv3-doc-libref-object-dynamicfunc-html">
    <meta name="description" content="">
    <meta property="og:description" content="">
</head>
<header><div class="header-search">
    <form class="header-search-form" action="/search/" method="get">
      <input type="text" id="search-box" name="query">
      <input type="submit" value="search">
    </form>
  </div>  </header>
<body>
<main id="content">
<p><span class="title">DynamicFunc</span><span class="type">class</span></p>

<p><a href="../file/dynfunc.h.html">dynfunc.h</a>[<a href="../source/dynfunc.h.html#75">75</a>]</p>

<p><a href="#_SuperClassTree_">Superclass<br />
Tree</a></p>

<p><a href="#_SubClassTree_">Subclass<br />
Tree</a></p>

<p><a href="#_ObjectSummary_">Global<br />
Objects</a></p>

<p><a href="#_PropSummary_">Property<br />
Summary</a></p>

<p><a href="#_MethodSummary_">Method<br />
Summary</a></p>

<p><a href="#_Properties_">Property<br />
Details</a></p>

<p><a href="#_Methods_">Method<br />
Details</a></p>

<div class="fdesc">

The DynamicFunc class is used to create new functions from source code
strings dynamically at run-time. To create a new executable function,
create a new DynamicFunc object:

  
local f = new DynamicFunc('function(x) { return x\*2; }',  
globals, locals, macros);

The first constructor argument is a string giving the source code to
compile.

The optional second argument is a LookupTable containing the global
symbols for the compilation. This can be the table returned from
t3GetGlobalSymbols(), or it can be a custom table. The compiler looks up
string keys in the table to resolve global symbol names; the
corresponding values can be objects, properties, enum values, or
function pointers.

The optional third argument is a StackFrameDesc object, or a list of
StackFrameDesc objects, giving the stack frames to use for local
variable access within the dynamic code. The source code can refer to
local variables in these frames, and can assign new values to them. This
is analogous to the way anonymous functions can refer to local variables
in their lexically enclosing scopes. If you supply a list, the compiler
searches the frames in order of their appearance in the list. If a
variable appears in more than one frame in the list, the compiler will
use the first occurrence it finds.

The optional fourth argument is a LookupTable giving the preprocessor
macros to use for the compilation. This is a table in the format
returned by t3GetGlobalsSymbols(T3PreprocMacros).

If the 'symtab' or 'macros' arguments are omitted or nil, the
compilation is done without global symbols or macros, respectively. Note
that built-in functions and intrinsic classes are identified by global
symbols, so you won't be able to call any built-ins if you don't provide
a symbol table.

The source code string can start with the keyword 'function', followed
by a list of parameter names, followed by the executable statements in
braces. Or, it can simply be a list of statements, in which case it's a
function with no arguments, as though it started with 'function()'.

Creating a DynamicFunc compiles the source code. If a compilation error
occurs (such as a syntax error, or an unknown symbol reference), the
'new' call will throw a CompilerException error. The exception object
contains information on the specific compiler error.

To invoke the new function, simply use the standard function call syntax
on the object value, as though it were a regular function pointer:

  
local y = f(7);

`intrinsic class `**`DynamicFunc`**` : `

</div>

<p><span id="_SuperClassTree_"></span></p>

<div class="mjhd">

<span class="hdln">Superclass Tree</span>   (in declaration order)

</div>

<p><strong><code class="language-plaintext highlighter-rouge">DynamicFunc</code></strong><br />
<span id="_SubClassTree_"></span></p>

<div class="mjhd">

<span class="hdln">Subclass Tree</span>  

</div>

<p><em>(none)</em> <span id="_ObjectSummary_"></span></p>

<div class="mjhd">

<span class="hdln">Global Objects</span>  

</div>

<p><em>(none)</em> <span id="_PropSummary_"></span></p>

<div class="mjhd">

<span class="hdln">Summary of Properties</span>  

</div>

<p><em>(none)</em> <span id="_MethodSummary_"></span></p>

<div class="mjhd">

<span class="hdln">Summary of Methods</span>  

</div>

<p><a href="#getSource"><code class="language-plaintext highlighter-rouge">getSource</code></a></p>

<p><span id="_Properties_"></span></p>

<div class="mjhd">

<span class="hdln">Properties</span>  

</div>

<p><em>(none)</em> <span id="_Methods_"></span></p>

<div class="mjhd">

<span class="hdln">Methods</span>  

</div>

<p><span id="getSource"></span></p>

<p><code class="language-plaintext highlighter-rouge">getSource ( )</code></p>

<p><a href="../file/dynfunc.h.html">dynfunc.h</a>[<a href="../source/dynfunc.h.html#81">81</a>]</p>

<div class="desc">

Get the original source code of the function. This returns the string
that was used as the source string to create the function.

</div>

<div class="ftr">

TADS 3 Library Manual  
Generated on 5/16/2013 from TADS version 3.1.3

</div>

</main>
<footer>
    <p>This is an unofficial informational website to aggregate TADS 3 information and does not claim authorship over, or any rights to, TADS 3 itself. All resources copyright their credited owners. TADS itself is <a href="https://www.tads.org/copyright.htm">Copyright ©2001-2013 Michael J. Roberts</a>.</p>
    <p><a href="/">Back to Homepage</a></p>
</footer>
</body>
</html>