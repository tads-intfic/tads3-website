<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="website">
    <link rel="icon" href="/assets/images/tads-favicon.png" type="image/png">
    <link rel="stylesheet" type="text/css"
                           href="/assets/css/styles.css">
    <title></title>
    <meta property="og:title" content=
    "">
    <meta name="description" content="">
    <meta property="og:description" content="">
</head>
<header id="header"><div class="header-search">
    <form class="header-search-form" action="/search" method="get">
      <input type="text" id="search-box" name="query">
      <input type="submit" value="search">
    </form>
  </div>  </header>
<body>
<main id="content">
<p><span class="title">MessageCtx</span><span class="type">class</span></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#433">433</a>]</p>

<p><a href="#_SuperClassTree_">Superclass<br />
Tree</a></p>

<p><a href="#_SubClassTree_">Subclass<br />
Tree</a></p>

<p><a href="#_ObjectSummary_">Global<br />
Objects</a></p>

<p><a href="#_PropSummary_">Property<br />
Summary</a></p>

<p><a href="#_MethodSummary_">Method<br />
Summary</a></p>

<p><a href="#_Properties_">Property<br />
Details</a></p>

<p><a href="#_Methods_">Method<br />
Details</a></p>

<p>Message expansion sentence context. This keeps track of the parts of the
sentence we’ve seen so far in the substitution parameters.</p>

<p>The sentence context is important for expanding certain items. For
verbs, it tells us which object is the subject, so that we can generate
the agreeing conjugation of the verb (in number and grammatical person).
For direct and indirect objects, it lets us generate a reflexive when
the same object appears in a second role (“You can’t put the box in
itself”).</p>

<p><code class="language-plaintext highlighter-rouge">class </code><strong><code class="language-plaintext highlighter-rouge">MessageCtx</code></strong><code class="language-plaintext highlighter-rouge"> :   object</code></p>

<p><span id="_SuperClassTree_"></span></p>

<p><span class="hdln">Superclass Tree</span>   (in declaration order)</p>

<p><strong><code class="language-plaintext highlighter-rouge">MessageCtx</code></strong><br />
`         object`<br />
<span id="_SubClassTree_"></span></p>

<p><span class="hdln">Subclass Tree</span>  </p>

<p><em>(none)</em> <span id="_ObjectSummary_"></span></p>

<p><span class="hdln">Global Objects</span>  </p>

<p><em>(none)</em> <span id="_PropSummary_"></span></p>

<p><span class="hdln">Summary of Properties</span>  </p>

<p>` <a href="#args"><code class="language-plaintext highlighter-rouge">args</code></a>  <a href="#cmd"><code class="language-plaintext highlighter-rouge">cmd</code></a>  <a href="#gotVerb"><code class="language-plaintext highlighter-rouge">gotVerb</code></a>  <a href="#lastParam"><code class="language-plaintext highlighter-rouge">lastParam</code></a>  <a href="#prescan"><code class="language-plaintext highlighter-rouge">prescan</code></a>  <a href="#reflexiveAnte"><code class="language-plaintext highlighter-rouge">reflexiveAnte</code></a>  <a href="#subj"><code class="language-plaintext highlighter-rouge">subj</code></a>  <a href="#vobj"><code class="language-plaintext highlighter-rouge">vobj</code></a>  `</p>

<p><span id="_MethodSummary_"></span></p>

<p><span class="hdln">Summary of Methods</span>  </p>

<p>` <a href="#actorIsPC"><code class="language-plaintext highlighter-rouge">actorIsPC</code></a>  <a href="#construct"><code class="language-plaintext highlighter-rouge">construct</code></a>  <a href="#endPreScan"><code class="language-plaintext highlighter-rouge">endPreScan</code></a>  <a href="#lastParamPlural"><code class="language-plaintext highlighter-rouge">lastParamPlural</code></a>  <a href="#noteObj"><code class="language-plaintext highlighter-rouge">noteObj</code></a>  <a href="#noteParam"><code class="language-plaintext highlighter-rouge">noteParam</code></a>  <a href="#noteVerb"><code class="language-plaintext highlighter-rouge">noteVerb</code></a>  <a href="#paramToNum"><code class="language-plaintext highlighter-rouge">paramToNum</code></a>  <a href="#paramToString"><code class="language-plaintext highlighter-rouge">paramToString</code></a>  <a href="#startSentence"><code class="language-plaintext highlighter-rouge">startSentence</code></a>  `</p>

<p><span id="_Properties_"></span></p>

<p><span class="hdln">Properties</span>  </p>

<p><span id="args"></span></p>

<p><code class="language-plaintext highlighter-rouge">args</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#756">756</a>]</p>

<p>the message argument list</p>

<p><span id="cmd"></span></p>

<p><code class="language-plaintext highlighter-rouge">cmd</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#759">759</a>]</p>

<p>the Command object among the arguments, if any</p>

<p><span id="gotVerb"></span></p>

<p><code class="language-plaintext highlighter-rouge">gotVerb</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#753">753</a>]</p>

<p>have we seen a verb parameter in this sentence yet?</p>

<p><span id="lastParam"></span></p>

<p><code class="language-plaintext highlighter-rouge">lastParam</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#741">741</a>]</p>

<p>the last parameter value</p>

<p><span id="prescan"></span></p>

<p><code class="language-plaintext highlighter-rouge">prescan</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#744">744</a>]</p>

<p>are we on the initial pre-expansion scan?</p>

<p><span id="reflexiveAnte"></span></p>

<p><code class="language-plaintext highlighter-rouge">reflexiveAnte</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#772">772</a>]</p>

<p>The reflexive antecedents. Each time we see an object in a non-subject
role, and the object has different pronoun usage from any previous
entry, we’ll add it to this list. If we see the same object subsequently
in another non-subject role, we’ll know that we should generate a
reflexive pronoun for the object rather than the name or a regular
pronoun:</p>

<p>You can’t put the tongs in the box with the tongs -&gt; with themselves</p>

<p><span id="subj"></span></p>

<p><code class="language-plaintext highlighter-rouge">subj</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#747">747</a>]</p>

<p>the subject of the sentence (as a Mentionable object)</p>

<p><span id="vobj"></span></p>

<p><code class="language-plaintext highlighter-rouge">vobj</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#750">750</a>]</p>

<p>the last object of the verb we saw</p>

<p><span id="_Methods_"></span></p>

<p><span class="hdln">Methods</span>  </p>

<p><span id="actorIsPC"></span></p>

<p><code class="language-plaintext highlighter-rouge">actorIsPC ( )</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#734">734</a>]</p>

<p>Is the actor involved in the Command the PC? If there’s a Command with
an actor, we check to see if it’s the PC. If there’s no Command or no
actor, we assume that the PC is the relevant actor (since there’s
nothing else specified anywhere) and return true.</p>

<p><span id="construct"></span></p>

<p><code class="language-plaintext highlighter-rouge">construct (args)</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#434">434</a>]</p>

<p><em>no description available</em></p>

<p><span id="endPreScan"></span></p>

<p><code class="language-plaintext highlighter-rouge">endPreScan ( )</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#472">472</a>]</p>

<p>End the pre-expansion scan. The expander makes two passes over each
sentence. The first scan doesn’t actually do any substitutions, but
merely invokes each parameter to give it a chance to exert its side
effects on the sentence context. The second scan actually applies the
substitutions. At the end of the first pass, the expander calls this to
let us finalize the initial scan and prepare for the second scan.</p>

<p><span id="lastParamPlural"></span></p>

<p><code class="language-plaintext highlighter-rouge">lastParamPlural ( )</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#703">703</a>]</p>

<p>Was the last parameter value plural? If the value is numeric, 1 is
singular and anything else is plural. If it’s a list, a one-element list
is singular and anything else is plural. If it’s a Mentionable, the
‘plural’ property determines it.</p>

<p><span id="noteObj"></span></p>

<p><code class="language-plaintext highlighter-rouge">noteObj (obj, role)</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#580">580</a>]</p>

<p>Note an object being used as a parameter in the given sentence role. The
role is one of the noun role enums defined above: vSubject, vObject, or
vAmbig. If the object is a subject, we’ll save it as the sentence
subject, so that we can generate an agreeing verb. Regardless of role,
we’ll also save it as a reflexive antecedent, so that we can generate a
reflexive pronoun if we see the same object again in another role in the
same sentence.</p>

<p><span id="noteParam"></span></p>

<p><code class="language-plaintext highlighter-rouge">noteParam (val)</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#494">494</a>]</p>

<p>Note a parameter value. Some parameters refer back to the immediately
preceding parameter, so it’s useful to have the most recent value
stashed away. Returns the parameter value as given.</p>

<p><span id="noteVerb"></span></p>

<p><code class="language-plaintext highlighter-rouge">noteVerb ( )</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#691">691</a>]</p>

<p>Note a verb parameter.</p>

<p><span id="paramToNum"></span></p>

<p><code class="language-plaintext highlighter-rouge">paramToNum (val)</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#542">542</a>]</p>

<p>Convert a parameter value to a numeric representation. If the value is
an integer or BigNumber, we return it as is; if a list or vector, we
return the number of elements; if nil, 0; if a string, the parsed
numeric value of the string; otherwise we simply return 1.</p>

<p><span id="paramToString"></span></p>

<p><code class="language-plaintext highlighter-rouge">paramToString (val)</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#504">504</a>]</p>

<p>Convert a parameter value to a string representation suitable for
message substitution.</p>

<p><span id="startSentence"></span></p>

<p><code class="language-plaintext highlighter-rouge">startSentence ( )</code></p>

<p><a href="../file/messages.t.html">messages.t</a>[<a href="../source/messages.t.html#448">448</a>]</p>

<p>start a new sentence
Adv3Lite Library Reference Manual<br />
Generated on 15/03/2023 from adv3Lite version 1.6.1</p>


</main>
<footer id="footer">
    <p>This is an unofficial informational website to aggregate TADS 3 information and does not claim authorship over, or any rights to, TADS 3 itself. All resources copyright their credited owners. TADS itself is <a href="https://www.tads.org/copyright.htm">Copyright ©2001-2013 Michael J. Roberts</a>.</p>
    <p><a href="/">Back to Homepage</a></p>
</footer>
</body>
</html>

<script>
    if(window.location !== window.top.location) {
        let header = document.getElementById('header');
        let footer = document.getElementById('footer');
        header.remove();
        footer.remove();
    }
</script>