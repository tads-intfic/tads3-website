<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="website">
    <link rel="icon" href="/assets/images/tads-favicon.png" type="image/png">
    <link rel="stylesheet" type="text/css"
                           href="/assets/css/styles.css">
    <title></title>
    <meta property="og:title" content=
    "">
    <meta name="description" content="">
    <meta property="og:description" content="">
</head>
<header id="header"><div class="header-search">
    <form class="header-search-form" action="/search" method="get">
      <input type="text" id="search-box" name="query">
      <input type="submit" value="search">
    </form>
  </div>  </header>
<body>
<main id="content">
<p><span class="title">quoteFilter</span><span class="type">object</span></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1563">1563</a>]</p>

<p><a href="#_SuperClassTree_">Superclass<br />
Tree</a></p>

<p><a href="#_PropSummary_">Property<br />
Summary</a></p>

<p><a href="#_MethodSummary_">Method<br />
Summary</a></p>

<p><a href="#_Properties_">Property<br />
Details</a></p>

<p><a href="#_Methods_">Method<br />
Details</a></p>

<p>quoteFilter: this loooks for smart quotes in the output and checks that
they are balanced.</p>

<p>The problem with the smart quotes &lt;q&gt; &lt;/q&gt; is that if one is
missing, or a spurious one is added, the error is perpetrated throughout
the rest of the game (or until a compensating error is located). The
purpose of quoteFilter is (a) to report such errors (to make them easier
to fix) and (b) to prevent them being propagated beyond a single turn.
In the main this works by having quoteFilter take over responsibility
for turning the &lt;q&gt; and &lt;/q&gt; tags into the appropriate HTML entities
rather than leaving it to the HTML rendering engine in the interpreter.
The quoteFilter OutputFilter keeps its own track of whether a double
quote or a single quote is rquired next, and resets this count at the
start of each turn.</p>

<p><strong><code class="language-plaintext highlighter-rouge">quoteFilter</code></strong><code class="language-plaintext highlighter-rouge"> :   </code><a href="../object/OutputFilter.html"><code class="language-plaintext highlighter-rouge">OutputFilter</code></a> <a href="../object/InitObject.html"><code class="language-plaintext highlighter-rouge">InitObject</code></a></p>

<p><span id="_SuperClassTree_"></span></p>

<p><span class="hdln">Superclass Tree</span>   (in declaration order)</p>

<p><strong><code class="language-plaintext highlighter-rouge">quoteFilter</code></strong><br />
<a href="../object/OutputFilter.html"><code class="language-plaintext highlighter-rouge">OutputFilter</code></a><br />
`                 object<code class="language-plaintext highlighter-rouge">  
[</code>InitObject<code class="language-plaintext highlighter-rouge">](../object/InitObject.html)  
[</code>ModuleExecObject<code class="language-plaintext highlighter-rouge">](../object/ModuleExecObject.html)  
</code>                         object`<br />
<span id="_PropSummary_"></span></p>

<p><span class="hdln">Summary of Properties</span>  </p>

<p><a href="#quoteCount"><code class="language-plaintext highlighter-rouge">quoteCount</code></a> <a href="#quotePat"><code class="language-plaintext highlighter-rouge">quotePat</code></a> <a href="#showWarnings"><code class="language-plaintext highlighter-rouge">showWarnings</code></a>
Inherited from <code class="language-plaintext highlighter-rouge">ModuleExecObject</code> :<br />
<a href="../object/ModuleExecObject.html#execAfterMe"><code class="language-plaintext highlighter-rouge">execAfterMe</code></a> <a href="../object/ModuleExecObject.html#execBeforeMe"><code class="language-plaintext highlighter-rouge">execBeforeMe</code></a> <a href="../object/ModuleExecObject.html#hasInitialized_"><code class="language-plaintext highlighter-rouge">hasInitialized_</code></a> <a href="../object/ModuleExecObject.html#isDoingExec_"><code class="language-plaintext highlighter-rouge">isDoingExec_</code></a> <a href="../object/ModuleExecObject.html#isExecuted_"><code class="language-plaintext highlighter-rouge">isExecuted_</code></a></p>

<p><span id="_MethodSummary_"></span></p>

<p><span class="hdln">Summary of Methods</span>  </p>

<p><a href="#execute"><code class="language-plaintext highlighter-rouge">execute</code></a> <a href="#filterText"><code class="language-plaintext highlighter-rouge">filterText</code></a> <a href="#quoteCheck"><code class="language-plaintext highlighter-rouge">quoteCheck</code></a>
Inherited from <code class="language-plaintext highlighter-rouge">ModuleExecObject</code> :<br />
<a href="../object/ModuleExecObject.html#_execute"><code class="language-plaintext highlighter-rouge">_execute</code></a> <a href="../object/ModuleExecObject.html#classExec"><code class="language-plaintext highlighter-rouge">classExec</code></a></p>

<p><span id="_Properties_"></span></p>

<p><span class="hdln">Properties</span>  </p>

<p><span id="quoteCount"></span></p>

<p><code class="language-plaintext highlighter-rouge">quoteCount</code></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1627">1627</a>]</p>

<p>Our quoteCount is the net number of quote marks we’ve output this turn,
i.e. the number of opening quote marks less the number of closing quote
marks.</p>

<p><span id="quotePat"></span></p>

<p><code class="language-plaintext highlighter-rouge">quotePat</code></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1630">1630</a>]</p>

<p>Our rex pattern to match &lt;q&gt; and &lt;/q&gt;</p>

<p><span id="showWarnings"></span></p>

<p><code class="language-plaintext highlighter-rouge">showWarnings</code></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1655">1655</a>]</p>

<p>Should I show a warning when I find unmatched smart quotes over the
course of a turn? Displaying such a warning would probably look
intrusive in a released version, but might well be useful in a version
sent out to beta-testers (so it shouldn’t be tied to a version compiled
for debugging). The showWarnings flag thus allows the warning messages
to be turned on and off as desired.</p>

<p><span id="_Methods_"></span></p>

<p><span class="hdln">Methods</span>  </p>

<p><span id="execute"></span></p>

<p><code class="language-plaintext highlighter-rouge">execute ( )</code><span class="rem">OVERRIDDEN</span></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1634">1634</a>]</p>

<p>In Initialize this filter</p>

<p><span id="filterText"></span></p>

<p><code class="language-plaintext highlighter-rouge">filterText (ostr, txt)</code><span class="rem">OVERRIDDEN</span></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1564">1564</a>]</p>

<p><em>no description available</em></p>

<p><span id="quoteCheck"></span></p>

<p><code class="language-plaintext highlighter-rouge">quoteCheck ( )</code></p>

<p><a href="../file/output.t.html">output.t</a>[<a href="../source/output.t.html#1664">1664</a>]</p>

<p>The PromptDaemon set up in our execute() method at Initialization runs
this method at the end of each turn. It checks to see if the number of
opening smart quotes over the course of the turn just completed is the
same as the number of closing smart quotes, and optionally prints a
warning message if it is not.
Adv3Lite Library Reference Manual<br />
Generated on 15/03/2023 from adv3Lite version 1.6.1</p>


</main>
<footer id="footer">
    <p>This is an unofficial informational website to aggregate TADS 3 information and does not claim authorship over, or any rights to, TADS 3 itself. All resources copyright their credited owners. TADS itself is <a href="https://www.tads.org/copyright.htm">Copyright ©2001-2013 Michael J. Roberts</a>.</p>
    <p><a href="/">Back to Homepage</a></p>
</footer>
</body>
</html>

<script>
    if(window.location !== window.top.location) {
        let header = document.getElementById('header');
        let footer = document.getElementById('footer');
        header.remove();
        footer.remove();
    }
</script>